{
    "type": "page",
    "body": [
        {
            "type": "panel",
            "title" : "选择班级和订单",
            "body": [
                {
                    "type": "tree-select",
                    "name": "search_group_id",
                    "label": "班级",
                    "size": "md",
                    "mode": "inline",
                    "initiallyOpen":false,
                    "onlyLeaf":true,
                    "searchable":true,
                    "source": "/mapi/group/lists?is_select=1"
                },
                {
                    "type": "tree-select",
                    "name": "search_order_id",
                    "label": "学员订单",
                    "mode": "inline",
                    "size":"lg",
                    "initiallyOpen":false,
                    "searchable":true,
                    "onlyLeaf":true,
                    "source": "/mapi/student/lists?is_select=1&nickname=$term&is_defer=1",
                    "deferApi": "/mapi/order/lists?is_select=1&student_uid=$value&is_hasbalance=1"
                }
            ]
        },
        {
            "type": "service",
            "name": "order_detail",
            "initFetch": false,
            "api": "/mapi/order/detail?order_id=$search_order_id",
            "body": {
                "type": "card",
                "header": {
                    "className": "bg-white",
                    "title": "$student_name - 科目: $subject_name",
                    "subTitle": "订单ID: $order_id",
                    "description" : "<table style='margin-left: -2.5px;'><tr><td>订单原价: $origin_balance元 </td>  <td class='p-l'>课单价原价: $origin_price元</td></tr><tr><td>实际缴费: $real_balance元</td>  <td class='p-l'>惠后单价: $real_price元</td></tr><tr><td>优惠: $discount_info</td></tr><tr><td>总课时数: $schedule_nums小时</td></tr><tr><td>结转流出金额: $transfer_balance元</td>  <td class='p-l'>退款流出金额: $refund_balance元</td></tr></table>"
                },
                "body": [
                    {
                        "type":"html",
                        "html":"<p style='color:red'>订单扣除待结算费用后, 剩余的课时数和余额记录</p>"
                    },
                    {
                        "type": "property",
                        "labelStyle": {
                            "fontWeight": "bold",
                            "textTransform": "capitalize"
                        },
                        "column": 4,
                        "items": [
                            {
                                "label": "可用余额",
                                "content": "$able_balance元"
                            },
                            {
                                "label": "可绑定课时数",
                                "content": "$able_duration小时"
                            },
                            {
                                "label": "已绑定课时数",
                                "content": "$band_duration小时"
                            },
                            {
                                "label": "已绑定金额",
                                "content": "$band_balance元"
                            }
                        ]
                    }
                ]
            }
        },
        {
            "label": "选择排课",
            "name": "schedule_ids",
            "type": "transfer",
            "id" : "schedule_lists",
            "resultListModeFollowSelect" : true,
            "columns": [
                {
                    "name": "id",
                    "label": "ID"
                },
                {
                    "name": "label",
                    "label": "排课时间"
                },
                {
                    "name": "teacher_subject_name",
                    "label": "教师科目"
                },
                {
                    "name": "area_name",
                    "label": "校区教室"
                },
                {
                    "name": "duration",
                    "label": "时长"
                }
            ],
            "source": "/mapi/schedule/bandlists?group_id=$search_group_id&order_id=$search_order_id",
            "searchable": true,
            "selectMode": "table"
        },
        {
            "type": "button",
            "label": "订单绑定课程",
            "level":"success",
            "actionType": "ajax",
            "api": "/mapi/schedule/bandcreate?group_id=$search_group_id&order_id=$search_order_id&schedule_ids=$schedule_ids",
            "reload": "schedule_ids,order_detail"
        }
    ]
}